<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
	xmlns:tns="http://sso.ib.org/service/service1/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="Service1"
	xmlns:wsp="http://www.w3.org/ns/ws-policy"
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
    xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702"
    xmlns:t="http://docs.oasis-open.org/ws-sx/ws-trust/200512"
    xmlns:wsaw="http://www.w3.org/2005/08/addressing"
	targetNamespace="http://sso.ib.org/service/service1/" xmlns:msg="http://sso.ib.org/xsd">
	
	<wsdl:import namespace="http://sso.ib.org/xsd" location="../xsd/Messages.xsd"></wsdl:import>

	<wsdl:message name="TestOperationRequest">
		<wsdl:part element="msg:TestRequest" name="request" />
	</wsdl:message>
	<wsdl:message name="TestOperationResponse">
		<wsdl:part element="msg:TestResponse" name="response" />
	</wsdl:message>
	
	<wsdl:portType name="Service1Endpoint">
		<wsdl:operation name="TestOperation">
			<wsdl:input message="tns:TestOperationRequest" />
			<wsdl:output message="tns:TestOperationResponse" />
		</wsdl:operation>
	</wsdl:portType>
	
	<wsdl:binding name="Service1Binding" type="tns:Service1Endpoint">
		<wsp:PolicyReference URI="#BindingTransportSAMLPolicy" />
		<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
		<wsdl:operation name="TestOperation">
			<soap:operation soapAction="http://sso.ib.org/service/service1/TestOperation" />
			<wsdl:input>
				<soap:body use="literal" />
			</wsdl:input>
			<wsdl:output>
				<soap:body use="literal" />
			</wsdl:output>
		</wsdl:operation>
	</wsdl:binding>
	
	<wsdl:service name="Service1Service">
		<wsdl:port binding="tns:Service1Binding" name="Service1Port">
			<soap:address location="http://www.example.org/" />
		</wsdl:port>
	</wsdl:service>

	<wsp:Policy wsu:Id="BindingTransportSAMLPolicy">
		<wsp:ExactlyOne>
			<wsp:All>
				<sp:TransportBinding
					xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
					<wsp:Policy>
						<sp:TransportToken>
							<wsp:Policy>
								<sp:HttpsToken RequireClientCertificate="false">
									<wsp:Policy />
								</sp:HttpsToken>
							</wsp:Policy>
						</sp:TransportToken>
						<sp:AlgorithmSuite>
							<wsp:Policy>
								<sp:TripleDes />
							</wsp:Policy>
						</sp:AlgorithmSuite>
						<sp:Layout>
							<wsp:Policy>
								<sp:Lax />
							</wsp:Policy>
						</sp:Layout>
						<sp:IncludeTimestamp />
					</wsp:Policy>
				</sp:TransportBinding>
				<sp:SupportingTokens
					xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
					<wsp:Policy>
						<sp:IssuedToken
							sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
							<sp:RequestSecurityTokenTemplate>
								<t:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</t:TokenType>
								<t:KeyType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer</t:KeyType>
								<!-- <t:KeyType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/PublicKey</t:KeyType> -->
								<t:Claims Dialect="http://schemas.xmlsoap.org/ws/2005/05/identity"
									xmlns:ic="http://schemas.xmlsoap.org/ws/2005/05/identity">
									<ic:ClaimType Uri="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role" />
								</t:Claims>
							</sp:RequestSecurityTokenTemplate>
							<wsp:Policy>
								<sp:RequireInternalReference />
							</wsp:Policy>
							<sp:Issuer>
								<wsaw:Address>https://localhost:9443/sso-demo-security-sts/STSService</wsaw:Address>
							</sp:Issuer>
						</sp:IssuedToken>
					</wsp:Policy>
				</sp:SupportingTokens>
				<sp:Wss11>
					<wsp:Policy>
						<sp:MustSupportRefIssuerSerial />
						<sp:MustSupportRefThumbprint />
						<sp:MustSupportRefEncryptedKey />
					</wsp:Policy>
				</sp:Wss11>
				<sp:Trust13>
					<wsp:Policy>
						<sp:MustSupportIssuedTokens />
						<sp:RequireClientEntropy />
						<sp:RequireServerEntropy />
					</wsp:Policy>
				</sp:Trust13>
			</wsp:All>
		</wsp:ExactlyOne>
	</wsp:Policy>

</wsdl:definitions>
